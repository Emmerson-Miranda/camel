version: '3.7'
services:
  rabbitmqserver:
    image: rabbitmq:3-management
    networks:
      - envoymesh
    ports:
      - "15672:15672" 
      - "5672:5672" 
  producer:
    image: emmerson/cdi-rabbit-producer:1.0.1-SNAPSHOT
    networks:
      - envoymesh
    ports:
      - "8080:8080"
  consumer:
    image: emmerson/cdi-rabbit-consumer:1.0.2-SNAPSHOT
    environment: 
      - DISABLE_SUSPENSION=true
    networks:
      - envoymesh
    ports:
      - "9090:9090"

networks:
  envoymesh: {}
